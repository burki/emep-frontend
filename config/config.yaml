imports:
    - { resource: parameters.yaml }
    - { resource: security.yaml }

# Put parameters here that don't need to change on each machine where the app is deployed
# http://symfony.com/doc/current/best_practices/configuration.html#application-related-configuration
parameters:
    locale: en
    # knp_menu.voter.router.class: Knp\Menu\Matcher\Voter\RegexVoter
    
framework:
    secret: '%kernel.secret%'
    # JMS\TranslationBundle\JMSTranslationBundle needs validation
    # validation: ~
    templating:
        engines: ['twig']
        hinclude_default_template: hinclude.html.twig
    # knp_paginator needs translate bundle
    translator: { fallbacks: ['%locale%'], logging: false }
    # needs form bundle
    # form: ~
    session:
        storage_id: session.storage.php_bridge
        handler_id: ~
    fragments: { path: /_fragment }
    # Symfony 4.3 adds automatic search-enging protection in dev-mode
    # You can override, see https://symfony.com/blog/new-in-symfony-4-3-automatic-search-engine-protection
    # disallow_search_engine_index: false

twig:
    globals:
        siteName: "Database of Modern Exhibitions (DoME) | European Paintings and Drawings 1905-1915"
        slugify: "@cocur_slugify"
        webDir: "%kernel.project_dir%/web"
        gaTracking: '%ga.site_id%'
    paths:
        '%kernel.project_dir%/templates': __main__
    form_themes:
        - LexikFormFilterBundle:Form:form_div_layout.html.twig
        - TetranzSelect2EntityBundle:Form:fields.html.twig
        
    #form:
    #    resources: ['bootstrap_3_horizontal_layout.html.twig']
        
knp_paginator:
    page_range: 5                       # number of links showed in the pagination menu (e.g: you have 10 pages, a page_range of 3, on the 5th page you'll see links to page 4, 5, 6)
    default_options:                                 
        page_name: page                 # page query parameter name
        sort_field_name: sort           # sort field query parameter name
        sort_direction_name: direction  # sort direction query parameter name
        distinct: true                  # ensure distinct results, useful when ORM queries are using GROUP BY statements
        filter_field_name: filterField  # filter field query parameter name
        filter_value_name: filterValue  # filter value query paameter name
    template:                                        
        # pagination: 'KnpPaginatorBundle:Pagination:sliding.html.twig'     # sliding pagination controls template
        pagination: KnpPaginatorBundle:Pagination:twitter_bootstrap_v3_pagination.html.twig
        sortable: 'KnpPaginatorBundle:Pagination:sortable_link.html.twig' # sort link template                                
        filtration: 'KnpPaginatorBundle:Pagination:filtration.html.twig'  # filters template
        
# Doctrine Configuration
doctrine:
    dbal:
        default_connection: default
        connections:
            default:
                host:     '%database.host%'
                port:     '%database.port%'
                dbname:   '%database.name%'
                user:     '%database.user%'
                password: '%database.password%'
                #driver:  pdo_mysql
                charset:  '%database.charset%' # UTF8
                options:
                        1002: "SET NAMES '%database.charset%' COLLATE '%database.charset%_unicode_ci'"
                default_table_options:
                    charset: '%database.charset%'
                    collate: '%database.charset%_unicode_ci'
                    engine:  MyISAM     # InnoDB
    orm:
        # TODO: set a cache, see http://www.craftitonline.com/2015/04/doctrine-file-system-caching-with-doctrine-cache-bundle/
        connection: default        
        auto_generate_proxy_classes: '%kernel.debug%'
        auto_mapping: true
        dql:
            string_functions:
                FIELD: DoctrineExtensions\Query\Mysql\Field
                IF: DoctrineExtensions\Query\Mysql\IfElse
                REPLACE: DoctrineExtensions\Query\Mysql\Replace
                REGEXP: DoctrineExtensions\Query\Mysql\Regexp
                JSON_CONTAINS: Scienta\DoctrineJsonFunctions\Query\AST\Functions\Mysql\JsonContains
            numeric_functions:
                MATCH: DoctrineExtensions\Query\Mysql\MatchAgainst
                RAND: DoctrineExtensions\Query\Mysql\Rand
            datetime_functions:
                YEAR: DoctrineExtensions\Query\Mysql\Year
                
        metadata_cache_driver: '%database.cache_driver%'
        result_cache_driver: '%database.cache_driver%'
        query_cache_driver: '%database.cache_driver%'
        #metadata_cache_driver:
        #    type: service
        #    id: doctrine_cache.providers.vendor_filesystem_metadata_cache
        #result_cache_driver:
        #    type: service
        #    id: doctrine_cache.providers.vendor_filesystem_result_cache
        #query_cache_driver:
        #    type: service
        #    id: doctrine_cache.providers.vendor_filesystem_query_cache
        second_level_cache:
            enabled: false                

doctrine_cache:
    providers:
        vendor_filesystem_metadata_cache:
            file_system:
                extension: cache
                directory: '%kernel.cache_dir%/doctrine'
        vendor_filesystem_result_cache:
            file_system:
                extension: cache
                directory: '%kernel.cache_dir%/doctrine'
        vendor_filesystem_query_cache:
            file_system:
                extension: cache
                directory: '%kernel.cache_dir%/doctrine'
            
stof_doctrine_extensions:
    orm:
        default:
            timestampable: true
   
assetic:
    debug:          '%kernel.debug%'
    use_controller: '%kernel.debug%'
    # assetic scans bundles to find assetic tags
    # that's why we set it in
    # AppBundle\Resources\views\Shared\stylesheets.html.twig
    # and not directly in temples/Base/base.html.twig
    # bundles: [ AppBundle ]
    filters:
        cssrewrite: ~
        # see http://symfony.com/doc/current/cookbook/assetic/php.html
        scssphp:
            formatter: 'Leafo\ScssPhp\Formatter\Compressed'
                        
swiftmailer:
    # disable_delivery:  true
    # delivery_address: daniel.burckhardt@sur-gmbh.ch
    # or use: delivery_whitelist
    transport: '%mailer.transport%'
    host: '%mailer.host%'
    port: '%mailer.port%'
    username: '%mailer.username%'
    password: '%mailer.password%'
    encryption: ssl
    # self-signed, see https://github.com/swiftmailer/swiftmailer/issues/544
    stream_options:
        ssl:
            allow_self_signed: true
            verify_peer: false
            verify_peer_name: false

knp_menu:
    # use "twig: false" to disable the Twig extension and the TwigRenderer
    twig:
        template: KnpMenuBundle::menu.html.twig
    #  if true, enables the helper for PHP templates
    templating: false
    # the renderer to use, list is also available by default
    default_renderer: twig

liip_url_auto_converter:
    linkclass:
    target: _blank
    debugmode: false

debug:
  dump_destination: "tcp://%env(VAR_DUMPER_SERVER)%"