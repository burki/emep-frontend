{% extends 'Base/base.html.twig' %}
{% block head %}
    {% import 'Shared/highcharts.html.twig' as highcharts %}
    {{ highcharts.head() }}
    
    <script type="text/javascript">
        $(document).ready(function() {
            {{ chart|raw }}
        });
    </script>
{% endblock %}

{# chart seperated so we can reuse it in per exhibition stats #}
{% block chart %}
    Highcharts.chart('{{ container|raw }}', {
        chart: {
            plotBackgroundColor: null,
            plotBorderWidth: 0,
            plotShadow: false
        },
        title: {
            text: ' ',
        },
        subtitle: {
            text: '{{ total }} catalogue entries'
        },
        tooltip: {
            pointFormat: '<b>{point.percentage:.1f}%</b> ({point.y} cat. entries)'
        },
        plotOptions: {
            pie: {

                /*
                startAngle: -90,
                endAngle: 90,
                center: ['50%', '50%']
                */
            },
            series: {
                stacking: 'normal',
                borderWidth: 1,
                groupPadding: 0,
                pointPadding: 0,
                events: {
                click: function (event) {
                    var url = '{{ path('exhibition-stats-info', { 'id': exhibitionId }) }}?chart=container-works';
                    url += '&series=' + encodeURIComponent(this.name);
                    url += '&point=' + encodeURIComponent(event.point.name);

                    $('#detailModal').modal('show');
                    $('#detailModal').find(".modal-body").load(url);
                    }
                }
            },
        },
        series: [{
            name: 'Type of Work',
            type: 'pie',
            innerSize: '50%',
            data: {{ data|raw }}
        }]
    });
{% endblock %}

{% block body %}
    <!--<h1>Artists' Age at Exhibition</h1>-->
    <div id="container" style="width: 100%; height: 400px; margin: 0 auto"></div>
{% endblock %}